{
    "version": "2018.07.17",
    "description": "Tex Live. Easy way to get up and running with the TeX document production system.",
    "homepage": "https://www.tug.org/texlive/",
    "license": {
        "identifier": "Freeware",
        "url": "https://www.tug.org/texlive/LICENSE.TL"
    },
    "url": "http://mirror.ctan.org/systems/texlive/tlnet/install-tl.zip",
    "hash": "sha512:382aacb86763dd2c146844019665e97eea1e627ad574cd214f109eb21cac005be9706ea5b74e3aec0b2543f1e4beb975e12501e5dc6eb0c13c1397e1ca08d2e6",
    "extract_dir": "install-tl-20180717",
    "extract_to": "cosi",
    "pre_install": [
        "$newDir = $dir.Path.Replace('\\', '/')",
        "$outFile = \"$dir\\texlive.profile\"",
        "$URL = \"https://gist.githubusercontent.com/Ash258/e143436e2f9183a650424d635b535e51/raw/texlive.profile\"",
        "if (Test-Path $persist_dir) { ",
        "    Write-Host 'Previous version was found.' -f Yellow",
        "    $newDir = $persist_dir.Path.Replace('\\', '/')",
        "} else {",
        "    Write-Host 'No previous version found.' -f Yellow",
        "}",
        "    # Create default profile",
        "$LINES = @(\"TEXDIR $newDir\", \"TEXMFLOCAL $newDir/texmf-local\", \"TEXMFSYSCONFIG $newDir/texmf-config\", \"TEXMFSYSVAR $newDir/texmf-var\")",
        "foreach ($line in $LINES) { Add-Content $outFile $line -Encoding ascii }",
        "Add-Content $outFile (New-Object System.Net.WebClient).DownloadString($URL) -Encoding ascii"
    ],
    "installer": {
        "file": "cosi\\install-tl-advanced.bat",
        "args": [
            "-portable",
            "-no-gui",
            "-profile $dir\\texlive.profile"
        ]
    },
    "post_install": "Remove-Item \"$dir\\cosi\" -Force -Recurse",
    "persist": [
        "bin",
        "texmf-config",
        "texmf-dist",
        "texmf-local",
        "texmf-var"
    ],
    "env_add_path": ".\\bin\\win32",
    "checkver": {
        "url": "http://mirrors.nic.cz/tex-archive/systems/texlive/tlnet",
        "re": "install-tl\\.zip</a></td>.*((?<y>\\d{4})-(?<m>\\d+)-(?<d>\\d+))",
        "replace": "${y}.${m}.${d}"
    },
    "autoupdate": {
        "url": "http://mirror.ctan.org/systems/texlive/tlnet/install-tl.zip",
        "extract_dir": "install-tl-$cleanVersion",
        "hash": {
            "url": "http://mirrors.nic.cz/tex-archive/systems/texlive/tlnet/install-tl.zip.sha512"
        }
    }
}
