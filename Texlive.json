{
    "version": "2018.09.27",
    "description": "Tex Live. Easy way to get up and running with the TeX document production system.",
    "homepage": "https://www.tug.org/texlive/",
    "license": {
        "identifier": "Freeware",
        "url": "https://www.tug.org/texlive/LICENSE.TL"
    },
    "url": "http://mirror.ctan.org/systems/texlive/tlnet/install-tl.zip",
    "hash": "sha512:2e067751e6c0a904d97e0bd4048f75f8beb410ac5d18503589db714190d0e3f38c3c7f37f89e0082641990a462f159cfb1b45c20f145b21ee02d156a7410840c",
    "extract_dir": "install-tl-20180927",
    "extract_to": "cosi",
    "pre_install": [
        "$newDir = $dir.Path.Replace('\\', '/')",
        "$outFile = \"$dir\\texlive.profile\"",
        "$URL = \"https://gist.githubusercontent.com/Ash258/e143436e2f9183a650424d635b535e51/raw/texlive.profile\"",
        "if (Test-Path \"$persist_dir\") { ",
        "    Write-Host 'Previous version was found.' -f Yellow",
        "    $newDir = $persist_dir.Path.Replace('\\', '/')",
        "} else {",
        "    Write-Host 'No previous version found.' -f Yellow",
        "}",
        "    # Create default profile",
        "$LINES = @(\"TEXDIR $newDir\", \"TEXMFLOCAL $newDir/texmf-local\", \"TEXMFSYSCONFIG $newDir/texmf-config\", \"TEXMFSYSVAR $newDir/texmf-var\")",
        "Add-Content $outFile ($LINES -join \"`r`n\") -Encoding Ascii",
        "Add-Content $outFile (New-Object System.Net.WebClient).DownloadString($URL) -Encoding Ascii"
    ],
    "installer": {
        "file": "cosi\\install-tl-advanced.bat",
        "args": [
            "-portable",
            "-no-gui",
            "-profile $dir\\texlive.profile"
        ]
    },
    "post_install": "Remove-Item \"$dir\\cosi\" -Force -Recurse",
    "persist": [
        "bin",
        "texmf-config",
        "texmf-dist",
        "texmf-local",
        "texmf-var"
    ],
    "env_add_path": ".\\bin\\win32",
    "checkver": {
        "url": "http://mirrors.nic.cz/tex-archive/systems/texlive/tlnet",
        "re": "install-tl\\.zip</a></td>.*((?<y>\\d{4})-(?<m>\\d+)-(?<d>\\d+))",
        "replace": "${y}.${m}.${d}"
    },
    "autoupdate": {
        "url": "http://mirror.ctan.org/systems/texlive/tlnet/install-tl.zip",
        "hash": {
            "url": "http://mirrors.nic.cz/tex-archive/systems/texlive/tlnet/install-tl.zip.sha512"
        },
        "extract_dir": "install-tl-$cleanVersion"
    }
}
