{
    "##": "Fix creation of confCons.xml and optimize persist checks",
    "version": "1.76.20.24669",
    "description": "Open source, tabbed, multi-protocol, remote connections manager. Fork of mRemote.",
    "homepage": "https://mremoteng.org/",
    "license": "GPL-2.0-only",
    "url": "https://github.com/mRemoteNG/mRemoteNG/releases/download/v1.76.20/mRemoteNG-Portable-1.76.20.24669.zip",
    "hash": "97b0e94bbdc409f3eb09b1017b3b58ccc0eae145a98a3bc6ea651ef1d5bc2d8e",
    "pre_install": [
        "function SettingProperty ($key, $value) {",
        "    return \"    <setting name=\"\"$key\"\">$value</setting>\"",
        "}",
        "function Persist-Check ($file, $content) {",
        "    if (-not (Test-Path \"$persist_dir\\$file\")) {",
        "        Write-Host 'File' $file 'does not exists. Creating.' -f Yellow",
        "        Set-Content \"$dir\\$file\" ($content -join \"`r`n\") -Encoding Ascii",
        "    }",
        "}",
        "$SETTINGS = @{",
        "    'CheckForUpdatesOnStartup' = 'False'",
        "    'CheckForUpdatesAsked'     = 'True'",
        "}",
        "$CONT = @(",
        "    '<?xml version=\"1.0\" encoding=\"utf-8\"?>'",
        "    '<settings>'",
        "    '  <localSettings>'",
        ")",
        "$SETTINGS.Keys | ForEach-Object { $CONT += SettingProperty $_ $SETTINGS[$_] }",
        "$CONT += '  </localSettings>'",
        "$CONT += '</settings>'",
        "",
        "Persist-Check 'mRemoteNG.settings' $CONT",
        "# TODO: ⬇⬇⬇⬇",
        "$confCONT = @('')",
        "Persist-Check 'confCons.xml' $confCONT"
    ],
    "bin": [
        "mRemoteNG.exe",
        "PuTTYNG.exe"
    ],
    "shortcuts": [
        [
            "mRemoteNG.exe",
            "mRemoteNG"
        ],
        [
            "PuTTYNG.exe",
            "PuTTYNG"
        ]
    ],
    "persist": [
        "confCons.xml",
        "mRemoteNG.settings"
    ],
    "checkver": {
        "github": "https://github.com/mRemoteNG/mRemoteNG/",
        "regex": "mRemoteNG-Portable-([\\d\\.]+)\\.zip"
    },
    "autoupdate": {
        "url": "https://github.com/mRemoteNG/mRemoteNG/releases/download/v$matchHead/mRemoteNG-Portable-$version.zip"
    }
}
